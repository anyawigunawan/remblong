name: Run

on:
  push:
    branches: ["main"]

jobs:
  build:
    env:
      PY_COLORS: "1"
    name: Install Dependencies
    runs-on: ubuntu-latest
    strategy:
      max-parallel: 20
      fail-fast: false
      matrix:
        rangeIndex: [1500 1502,1502 1504,1504 1506,1506 1508,1508 1510,1510 1512,1512 1514,1514 1516,1516 1518,1518 1520,1520 1522,1522 1524,1524 1526,1526 1528,1528 1530,1530 1532,1532 1534,1534 1536,1536 1538,1538 1540,1540 1542,1542 1544,1544 1546,1546 1548,1548 1550,1550 1552,1552 1554,1554 1556,1556 1558,1558 1560,1560 1562,1562 1564,1564 1566,1566 1568,1568 1570,1570 1572,1572 1574,1574 1576,1576 1578,1578 1580,1580 1582,1582 1584,1584 1586,1586 1588,1588 1590,1590 1592,1592 1594,1594 1596,1596 1598,1598 1600,1600 1602,1602 1604,1604 1606,1606 1608,1608 1610,1610 1612,1612 1614,1614 1616,1616 1618,1618 1620,1620 1622,1622 1624,1624 1626,1626 1628,1628 1630,1630 1632,1632 1634,1634 1636,1636 1638,1638 1640,1640 1642,1642 1644,1644 1646,1646 1648,1648 1650,1650 1652,1652 1654,1654 1656,1656 1658,1658 1660,1660 1662,1662 1664,1664 1666,1666 1668,1668 1670,1670 1672,1672 1674,1674 1676,1676 1678,1678 1680,1680 1682,1682 1684,1684 1686,1686 1688,1688 1690,1690 1692,1692 1694,1694 1696,1696 1698,1698 1700,1700 1702,1702 1704,1704 1706,1706 1708,1708 1710,1710 1712,1712 1714,1714 1716,1716 1718,1718 1720,1720 1722,1722 1724,1724 1726,1726 1728,1728 1730,1730 1732,1732 1734,1734 1736,1736 1738,1738 1740,1740 1742,1742 1744,1744 1746,1746 1748,1748 1750,1750 1752,1752 1754,1754 1756,1756 1758,1758 1760,1760 1762,1762 1764,1764 1766,1766 1768,1768 1770,1770 1772,1772 1774,1774 1776,1776 1778,1778 1780,1780 1782,1782 1784,1784 1786,1786 1788,1788 1790,1790 1792,1792 1794,1794 1796,1796 1798,1798 1800,1800 1802,1802 1804,1804 1806,1806 1808,1808 1810,1810 1812,1812 1814,1814 1816,1816 1818,1818 1820,1820 1822,1822 1824,1824 1826,1826 1828,1828 1830,1830 1832,1832 1834,1834 1836,1836 1838,1838 1840,1840 1842,1842 1844,1844 1846,1846 1848,1848 1850,1850 1852,1852 1854,1854 1856,1856 1858,1858 1860,1860 1862,1862 1864,1864 1866,1866 1868,1868 1870,1870 1872,1872 1874,1874 1876,1876 1878,1878 1880,1880 1882,1882 1884,1884 1886,1886 1888,1888 1890,1890 1892,1892 1894,1894 1896,1896 1898,1898 1900,1900 1902,1902 1904,1904 1906,1906 1908,1908 1910,1910 1912,1912 1914,1914 1916,1916 1918,1918 1920,1920 1922,1922 1924,1924 1926,1926 1928,1928 1930,1930 1932,1932 1934,1934 1936,1936 1938,1938 1940,1940 1942,1942 1944,1944 1946,1946 1948,1948 1950,1950 1952,1952 1954,1954 1956,1956 1958,1958 1960,1960 1962,1962 1964,1964 1966,1966 1968,1968 1970,1970 1972,1972 1974,1974 1976,1976 1978,1978 1980,1980 1982,1982 1984,1984 1986,1986 1988,1988 1990,1990 1992,1992 1994,1994 1996,1996 1998,1998 2000]
    steps:
      - uses: actions/checkout@v4
      - name: Install Dependencies
        uses: actions/setup-python@v5
        with:
          python-version: 3.12
      - name: Install
        run: |
          python -m pip install --upgrade pip wheel setuptools
          python -m pip install seleniumbase==4.27.0
          python -m pip install supabase
          sudo apt install -y google-chrome-stable
          seleniumbase install chromedriver
          sudo apt install -y xvfb
          export DISPLAY=:0
          /usr/bin/Xvfb :0 -screen 0 1024x768x24 &
          sleep 5
          xvfb-run python run-t-kw.py ${{matrix.RangeIndex}}
      - name: done
        run: exit
